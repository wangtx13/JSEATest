/* * @ # application 1 1 2006 05 01 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * */package app * beans * * * prefs * * io * /** * application * * * @author werner randelshofer * @version 1 1 2006 05 01 exit 0 explicitly in stop * <br>1 0 october 4 2005 created */public application bean application { linked list projects = linked list collection unmodifiable documents is enabled = resource bundle labels application model model linked list< file> recent files = linked list max recent files count = 10 preferences prefs /** creates a instance */ application { } init { prefs = preferences user node get model == ? get get model get count = prefs get recent count 0 i=0 i < count i++ { path = prefs get recent +i path != { recent files add path } } model != { model init application } } start { project p = create project add p show p } project create project { project p = basic create project p init get model != { get model init project p } init project actions p p } set model application model value { application model old value = model model = value fire property change model old value value } application model get model { model } project basic create project { model create project } get name { model get name } get { model get } get copyright { model get copyright } init project actions project p stop { project p linked list< project> projects { dispose p } exit 0 } remove project p { hide p old count = projects size projects remove p p set application fire property change project count old count projects size } add project p { p get application != { old count = projects size projects add p p set application fire property change project count old count projects size } } dispose project p { remove p p dispose } collection< project> projects { unmodifiable documents == { unmodifiable documents = collections unmodifiable collection projects } unmodifiable documents } is enabled { is enabled } set enabled value { old value = is enabled is enabled = value fire property change enabled old value value } container create container { j frame } launch { configure utilities later runnable { run { init start } } } init labels { labels = resource bundle get l a f bundle app labels } configure { } list< file> recent files { collections unmodifiable list recent files } clear recent files { list< file> old value = list< file> recent files clone recent files clear prefs put recent count recent files size fire property change recent files collections unmodifiable list old value collections unmodifiable list recent files } add recent { list< file> old value = list< file> recent files clone recent files contains { recent files remove } recent files add first recent files size > max recent files count { recent files remove last } prefs put recent count recent files size i=0 f recent files { prefs put recent +i f get path i++ } fire property change recent files old value 0 fire property change recent files collections unmodifiable list old value collections unmodifiable list recent files }} 