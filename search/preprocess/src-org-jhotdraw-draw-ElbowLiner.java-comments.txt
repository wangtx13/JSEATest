/* * @ # elbow liner 1 0 2006 03 28 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * */package draw * * geom * geom * xml dom input xml dom output xml dom storable /** * a liner that constrains a connection to orthogonal lines * * @author werner randelshofer * @version 1 0 2006 03 28 created */public elbow liner liner dom storable { /** creates a instance */ elbow liner { } collection< handle> create handles bezier path path { } lineout connection figure figure { bezier path path = line connection figure figure get bezier path connector start = figure get start connector connector end = figure get end connector start == || end == || path == { } point2 d sp = start find start figure point2 d ep = end find end figure path clear path add bezier path node sp x sp y sp x == ep x || sp y == ep y { path add bezier path node ep x ep y } { rectangle2 d sb = start get bounds sb x += 5d sb y += 5d sb width = 10d sb height = 10d rectangle2 d eb = end get bounds eb x += 5d eb y += 5d eb width = 10d eb height = 10d soutcode = sb outcode sp soutcode == 0 { soutcode = geom outcode sb eb } eoutcode = eb outcode ep eoutcode == 0 { eoutcode = geom outcode eb sb } soutcode geom o u t t o p | geom o u t b o t t o m != 0 eoutcode geom o u t t o p | geom o u t b o t t o m != 0 { path add bezier path node sp x sp y + ep y /2 path add bezier path node ep x sp y + ep y /2 } soutcode geom o u t l e f t | geom o u t r i g h t != 0 eoutcode geom o u t l e f t | geom o u t r i g h t != 0 { path add bezier path node sp x + ep x /2 sp y path add bezier path node sp x + ep x /2 ep y } path add bezier path node ep x ep y } path invalidate path } read dom input in { } write dom output out { } liner clone { { liner clone } clone not supported ex { internal = internal ex get message init cause ex } }} 