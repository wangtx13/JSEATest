/* * @ # tool bar prefs handler 1 1 2006 06 15 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * */package prefs * event * prefs * * plaf basic * event * /** * tool bar prefs handler * * @author werner randelshofer * @version 1 1 2006 06 15 added to work with tool bar u i's that don't extend * basic tool bar u i * <br>1 0 2 april 2004 created */public tool bar prefs handler component listener ancestor listener { j tool bar toolbar prefs prefix preferences prefs first time shown tool bar prefs handler j tool bar toolbar prefs prefix preferences prefs { toolbar = toolbar prefs prefix = prefs prefix prefs = prefs constraint = prefs get prefs prefix+ constraint border layout n o r t h orientation = constraint equals border layout n o r t h || constraint equals border layout s o u t h ? j tool bar h o r i z o n t a l j tool bar v e r t i c a l toolbar set orientation orientation toolbar get parent add constraint toolbar toolbar set visible prefs get prefs prefix+ visible /* prefs get prefs prefix+ is floating { make tool bar }*/ toolbar add component listener toolbar add ancestor listener } /* * x x x does not work make tool bar { basic tool bar u i ui = basic tool bar u i toolbar get u i window window = utilities get window ancestor toolbar out window ancestor +window+ frame + window frame ui set floating point prefs get prefs prefix+ floating x 0 prefs get prefs prefix+ floating y 0 window = utilities get window ancestor toolbar window set location prefs get prefs prefix+ floating x 0 prefs get prefs prefix+ floating y 0 window to front }*/ component hidden component event e { prefs put prefs prefix+ visible } component moved component event e { location changed } location changed { f i x m e use reflection to get hold of 'is floating' toolbar get u i basic tool bar u i { basic tool bar u i ui = basic tool bar u i toolbar get u i floating = ui is floating prefs put prefs prefix+ is floating floating floating { window window = utilities get window ancestor toolbar prefs put prefs prefix+ floating x window get x prefs put prefs prefix+ floating y window get y } toolbar get parent != { x = toolbar get x y = toolbar get y insets insets = toolbar get parent get insets constraint x == insets left y == insets top { constraint = toolbar get orientation == j tool bar h o r i z o n t a l ? border layout n o r t h border layout w e s t } { constraint = toolbar get orientation == j tool bar h o r i z o n t a l ? border layout s o u t h border layout e a s t } prefs put prefs prefix+ constraint constraint } } { toolbar get parent != { x = toolbar get x y = toolbar get y insets insets = toolbar get parent get insets constraint x == insets left y == insets top { constraint = toolbar get orientation == j tool bar h o r i z o n t a l ? border layout n o r t h border layout w e s t } { constraint = toolbar get orientation == j tool bar h o r i z o n t a l ? border layout s o u t h border layout e a s t } prefs put prefs prefix+ constraint constraint } } } component resized component event e { location changed } component shown component event e { prefs put prefs prefix+ visible } ancestor added ancestor event event { location changed } ancestor moved ancestor event event { toolbar get u i basic tool bar u i { basic tool bar u i toolbar get u i is floating { location changed } } } ancestor removed ancestor event event { toolbar get u i basic tool bar u i { basic tool bar u i toolbar get u i is floating { location changed } } }} 