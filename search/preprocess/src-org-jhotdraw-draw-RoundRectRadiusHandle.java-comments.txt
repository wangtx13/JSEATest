/* * @ # round rect radius handle 2 0 2006 01 14 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * ??? */package draw geom geom * undo * * geom * /** * a handle to manipulate the radius of a round rectangle * * @author werner randelshofer * @version 2 0 2006 01 14 changed to support coordinates * <br>1 0 2004 03 02 derived from 6 0b1 */public round rect radius handle handle { o f f s e t = 6 point original arc composite edit edit /** creates a instance */ round rect radius handle figure owner { owner } /** * draws handle */ draw graphics2 d g { draw diamond g color yellow color black } rectangle basic get bounds { rectangle r = rectangle locate r grow get handlesize / 2 + 1 get handlesize / 2 + 1 r } point locate { round rectangle figure owner = round rectangle figure get owner rectangle r = view drawing to view owner get bounds point arc = view drawing to view point2 d owner get arc width owner get arc height point r x+arc x/2+ o f f s e t r y+arc y/2+ o f f s e t } track start point anchor modifiers ex { view get drawing fire undoable edit happened edit = composite edit mehrfachaenderung round rectangle figure owner = round rectangle figure get owner original arc = view drawing to view point2 d owner get arc width owner get arc height } track step point anchor point modifiers ex { dx = x anchor x dy = y anchor y round rectangle figure owner = round rectangle figure get owner rectangle r = view drawing to view owner get bounds point view arc = point geom range 0 r width 2* original arc x/2 + dx geom range 0 r height 2* original arc y/2 + dy point2 d arc = view view to drawing view arc owner set arc arc x arc y } track end point anchor point modifiers ex { view get drawing fire undoable edit happened edit }} 