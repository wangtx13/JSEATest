/* * @ # select area tracker 3 0 2006 02 14 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * ??? */package draw event * * * /** * select area tracker * * @author werner randelshofer * @version 3 0 2006 02 15 updated to handle multiple views * <br>1 0 2003 12 01 derived from 5 4b1 */public select area tracker tool { rectangle rubber band = rectangle /** creates a instance */ select area tracker { } mouse pressed mouse event evt { mouse pressed evt clear rubber band } mouse released mouse event evt { select group evt is shift down clear rubber band } mouse dragged mouse event evt { rectangle invalidated area = rectangle rubber band clone rubber band set bounds math min anchor x evt get x math min anchor y evt get y math abs anchor x evt get x math abs anchor y evt get y invalidated area is empty { invalidated area = rectangle rubber band clone } { invalidated area = invalidated area union rubber band } fire area invalidated invalidated area } mouse moved mouse event evt { out select area tracker mouse moved +evt get x + +evt get y clear rubber band update cursor editor find view container evt get source point evt get x evt get y } clear rubber band { rubber band width > 0 { fire area invalidated rubber band rubber band width = 0 } } draw graphics2 d g { g set stroke basic stroke g set color color black g draw rect rubber band x rubber band y rubber band width 1 rubber band height 1 } select group toggle { get view add to selection get view find figures within rubber band }} 