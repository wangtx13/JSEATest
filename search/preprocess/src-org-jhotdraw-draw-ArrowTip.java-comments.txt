/* * @ # arrow tip 1 0 19 november 2003 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * ??? */package draw io * * geom * * xml dom input xml dom output xml dom storable /** * an arrow tip line decoration * * @author werner randelshofer * @version 2 0 2006 01 14 changed to support coordinates * <br>1 0 2003 12 01 derived from 5 4b1 */public arrow tip line decorationimplements dom storable { /** * pointiness of arrow */ angle outer radius inner radius arrow tip { 0 35 12 11 3 } /** * constructs an arrow tip with the specified angle and outer and inner * radius */ arrow tip angle outer radius inner radius { angle outer radius inner radius } /** * constructs an arrow tip with the specified */ arrow tip angle outer radius inner radius is filled is stroked is solid { is filled is stroked is solid angle = angle outer radius = outer radius inner radius = inner radius } general path get decorator path figure f { f i x m e should take the stroke join an the outer radius into account to compute the offset properly offset = is stroked ? 1 0 general path path = general path path move to outer radius * math sin angle offset + outer radius * math cos angle path line to 0 offset path line to outer radius * math sin angle offset + outer radius * math cos angle inner radius != 0 { path line to 0 inner radius + offset path close path } path } get decorator path radius figure f { offset = is stroked ? 0 5 0 1 inner radius + offset } read dom input in { angle = in get attribute angle 0 35f inner radius = in get attribute inner radius 12f outer radius = in get attribute outer radius 12f set filled in get attribute is filled set stroked in get attribute is stroked set solid in get attribute is solid } write dom output out { out add attribute angle angle out add attribute inner radius inner radius out add attribute outer radius outer radius out add attribute is filled is filled out add attribute is stroked is stroked out add attribute is solid is solid } } 