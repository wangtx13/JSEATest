/* * @ # locator layouter 2 0 2006 01 14 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * */package draw geom dimension2 d * * geom * * /** * a layouter which lays out all children of a composite figure according to their * layout locator property * * * @author werner randelshofer * @version 2 0 2006 01 14 changed to support precision coordinates * <br>1 0 3 februar 2004 created */public locator layouter layouter { /** * layout locator property used by the children to specify their location * relative to the composite figure */ attribute key< locator> l a y o u t l o c a t o r = attribute key< locator> layout locator /** creates a instance */ locator layouter { } rectangle2 d calculate layout composite figure composite figure point2 d anchor point2 d { rectangle2 d bounds = figure child composite figure get children { locator locator = get locator child rectangle2 d r locator == { r = child get bounds } { point2 d p = locator locate composite figure dimension2 d d = child get preferred size r = rectangle2 d p x p y d width d height } ! r is empty { bounds == { bounds = r } { bounds add r } } } bounds == ? rectangle2 d bounds } rectangle2 d layout composite figure composite figure point2 d anchor point2 d { rectangle2 d bounds = figure child composite figure get children { locator locator = get locator child rectangle2 d r locator == { r = child get bounds } { point2 d p = locator locate composite figure child dimension2 d d = child get preferred size r = rectangle2 d p x p y d width d height } child will change child basic set bounds point2 d r get min x r get min y point2 d r get max x r get max y child changed ! r is empty { bounds == { bounds = r } { bounds add r } } } bounds == ? rectangle2 d bounds } locator get locator figure f { locator f get attribute l a y o u t l o c a t o r }} 