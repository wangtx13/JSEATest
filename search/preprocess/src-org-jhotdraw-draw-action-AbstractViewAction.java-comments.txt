/* * @ # view action 1 2 2006 04 21 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * */package draw action draw drawing draw drawing editor draw drawing view * beans * * undo * * /** * actions which act on a drawing view * * @author werner randelshofer * @version 1 2 2006 04 21 set editor added * <br>1 1 2006 03 15 support enabled state of view added * <br>1 0 2003 12 01 created */public view action action { drawing editor editor drawing view view resource bundle labels = resource bundle get l a f bundle draw labels locale get property change listener property change handler = property change listener { property change property change event evt { evt get property name equals enabled { update enabled state } } } /** * creates a view action which acts on the current view of the editor */ view action drawing editor editor { editor = editor editor add property change listener property change listener { property change property change event evt { evt get property name equals view { evt get old value != { drawing view view = drawing view evt get old value view remove property change listener property change handler } evt get value != { drawing view view = drawing view evt get old value view add property change listener property change handler update enabled state } } } } } /** * creates a view action which acts on the specified view */ view action drawing view view { view = view } set editor drawing editor value { editor = value } drawing view get view { view != ? view editor get view } drawing get drawing { get view get drawing } fire undoable edit happened undoable edit edit { get drawing fire undoable edit happened edit } view changed { } update enabled state { get view != { set enabled get view is enabled get view get selection count > 0 } { set enabled } }} 