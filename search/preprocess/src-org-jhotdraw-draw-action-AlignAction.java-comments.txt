/* * @ # align action 2 0 2006 01 15 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * */package draw action draw drawing editor draw figure draw figure selection event draw transform edit undo composite edit * * geom * * undo * /** * aligns the selected figures * * x x x fire edit events * * @author werner randelshofer * @version 2 0 2006 01 15 changed to support precision coordinates * <br>1 0 17 m???rz 2004 created */public align action selected action { /** creates a instance */ align action drawing editor editor { editor } update enabled state { get view != { set enabled get view is enabled get view get selection count > 1 } { set enabled } } action performed event action event e { composite edit edit = composite edit labels get align fire undoable edit happened edit align figures get view get selected figures get selection bounds fire undoable edit happened edit } align figures collection selected figures rectangle2 d selection bounds /** * the bounds of the selected figures */ rectangle2 d get selection bounds { rectangle2 d bounds = iterator i=get view get selected figures iterator i has next { figure f = figure i next bounds == { bounds = f get bounds } { bounds add f get bounds } } bounds } north align action { north drawing editor editor { editor labels configure action align north } align figures collection selected figures rectangle2 d selection bounds { y = selection bounds y iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = affine transform tx translate 0 y b y f basic transform tx f changed fire undoable edit happened transform edit f tx } } } east align action { east drawing editor editor { editor labels configure action align east } align figures collection selected figures rectangle2 d selection bounds { x = selection bounds x + selection bounds width iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = affine transform tx translate x b x b width 0 f basic transform tx f changed fire undoable edit happened transform edit f tx } } } west align action { west drawing editor editor { editor labels configure action align west } align figures collection selected figures rectangle2 d selection bounds { x = selection bounds x iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = affine transform tx translate x b x 0 f basic transform tx f changed fire undoable edit happened transform edit f tx } } } south align action { south drawing editor editor { editor labels configure action align south } align figures collection selected figures rectangle2 d selection bounds { y = selection bounds y + selection bounds height iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = affine transform tx translate 0 y b y b height f basic transform tx f changed fire undoable edit happened transform edit f tx } } } vertical align action { vertical drawing editor editor { editor labels configure action align vertical } align figures collection selected figures rectangle2 d selection bounds { y = selection bounds y + selection bounds height / 2 iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = affine transform tx translate 0 y b y b height / 2 f basic transform tx f changed fire undoable edit happened transform edit f tx } } } horizontal align action { horizontal drawing editor editor { editor labels configure action align horizontal } align figures collection selected figures rectangle2 d selection bounds { x = selection bounds x + selection bounds width / 2 iterator i=get view get selected figures iterator i has next { figure f = figure i next f will change rectangle2 d b = f get bounds affine transform tx = affine transform tx translate x b x b width / 2 0 f basic transform tx f changed fire undoable edit happened transform edit f tx } } }} 