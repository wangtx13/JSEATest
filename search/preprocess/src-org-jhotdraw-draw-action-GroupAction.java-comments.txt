/* * @ # group action 1 1 2006 07 12 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * */package draw action draw * undo * * * undo * /** * group action * * @author werner randelshofer * @version 1 1 2006 07 12 changed to support any composite figure * <br>1 0 1 2006 07 09 fixed enabled state * <br>1 0 24 november 2003 created */public group action selected action { = selection group composite figure prototype /** creates a instance */ group action drawing editor editor { editor group figure } group action drawing editor editor composite figure prototype { editor prototype = prototype labels configure action } @ override update enabled state { get view != { set enabled can group } { set enabled } } can group { get view get selection count > 1 } action performed event action event e { can group { drawing view view = get view linked list< figure> ungrouped figures = linked list< figure> view get selected figures composite figure group = composite figure prototype clone composite edit edit = composite edit labels get selection group { redo cannot redo { redo group figures view group ungrouped figures } undo cannot undo { ungroup figures view group undo } add edit undoable edit an edit { add edit an edit } } fire undoable edit happened edit group figures view group ungrouped figures fire undoable edit happened edit } } collection< figure> ungroup figures drawing view view composite figure group { x x x is redundant with ungroup action linked list< figure> figures = linked list< figure> group get children view clear selection group basic remove all children view get drawing basic add all figures view get drawing remove group view add to selection figures figures } group figures drawing view view composite figure group collection< figure> figures { collection< figure> sorted = view get drawing sort figures view get drawing basic remove all figures view clear selection view get drawing add group group will change figure f sorted { group basic add f } group changed view add to selection group }} 