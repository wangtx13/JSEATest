/* * @ # node figure 1 0 july 4 2006 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * * * original copyright * project 		 j hotdraw a g u i framework technical drawings *				http www *				http sourceforge net * copyright 	 c by the original author s and all contributors * license 		 lesser g n u license l g p l *				http www opensource org/licenses/lgpl license html */package samples net figures * geom * * draw * geom * draw attribute keys * * /** * node figure * * @author werner randelshofer * @version 1 0 july 4 2006 created */public node figure text figure { linked list< connector> connectors locator connector north locator connector south locator connector east locator connector west /** creates a instance */ node figure { rectangle figure rf = rectangle figure set decorator rf create connectors set draw decorator first d e c o r a t o r i n s e t s set insets2 d 6 10 6 10 resource bundle labels = resource bundle get l a f bundle samples net labels set text labels get node name } create connectors { connectors = linked list< connector> connectors add locator connector relative locator 0 5 0 connectors add locator connector relative locator 0 5 1 connectors add locator connector relative locator 1 0 5 connectors add locator connector relative locator 0 0 5 connector c connectors { c set visible } } @ override collection< handle> create handles detail level { list< handle> handles = linked list< handle> detail level == 0 { handles add move handle relative locator north west handles add move handle relative locator north east handles add move handle relative locator south west handles add move handle relative locator south east handles add connection handle relative locator north line connection figure handles add connection handle relative locator east line connection figure handles add connection handle relative locator south line connection figure handles add connection handle relative locator west line connection figure } handles } @ override rectangle2 d get figure draw bounds { rectangle2 d b = get figure draw bounds grow connectors geom grow b 10d 10d b } @ override connector find connector point2 d p connection figure figure { closest connector min = m a x v a l u e connector closest = connector c connectors { point2 d p2 = geom center c get bounds d = geom length2 p x p y p2 x p2 y d < min { min = d closest = c } } closest } @ override connector find compatible connector connector c is start { connectors get first } node figure clone { node figure that = node figure clone that create connectors that } @ override draw connectors graphics2 d g { connector c connectors { c draw g } } @ override get layer { 1 stay below connection figures } set attribute attribute key key value { set attribute key value get decorator != { get decorator set attribute key value } }} 