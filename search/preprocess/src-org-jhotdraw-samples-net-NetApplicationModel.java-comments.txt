/* * @ # net application model 1 0 2006 06 18 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * */package samples net * event * * * app * app action * draw * draw action * samples net figures * * /** * net application model * * @author werner randelshofer * @version 1 0 2006 06 18 created */public net application model application model { scale factors = {5 4 3 2 1 5 1 25 1 0 75 0 5 0 25 0 10} tool button listener item listener { tool tool drawing editor editor tool button listener tool t drawing editor editor { tool = t editor = editor } item state changed item event evt { evt get state change == item event s e l e c t e d { editor set tool tool } } } /** * editor is shared by all projects */ drawing editor shared editor hash map< action> actions /** creates a instance */ net application model { } init application application a { resource bundle draw labels = resource bundle get l a f bundle draw labels resource bundle labels = resource bundle get l a f bundle samples net labels action aa put action export action export action a put action toggle grid aa = toggle project property action a grid visible draw labels configure action aa align grid sf scale factors { put action sf*100 + % aa = project property action a scale factor t y p e sf aa put value action n a m e sf*100 + % } } drawing editor get shared editor { shared editor == { shared editor = drawing editor } shared editor } init project application a project p { a is sharing tools among projects { net project p set drawing editor get shared editor } } add creation buttons to j tool bar tb drawing editor editor { attribute keys the entitie sets hash map< attribute key object> attributes resource bundle labels = resource bundle get l a f bundle samples net labels resource bundle draw labels = resource bundle get l a f bundle draw labels tool bar button factory add selection tool to tb editor tb add separator attributes = hash map< attribute key object> attributes put attribute keys f i l l c o l o r color white attributes put attribute keys s t r o k e c o l o r color black attributes put attribute keys t e x t c o l o r color black tool bar button factory add tool to tb editor text tool node figure attributes create node labels attributes = hash map< attribute key object> attributes put attribute keys s t r o k e c o l o r color 0x000099 tool bar button factory add tool to tb editor connection tool line connection figure attributes create link labels } /** * creates toolbars the application * always an empty list subclasses may other * values */ list< j tool bar> create tool bars application a project pr { resource bundle draw labels = resource bundle get l a f bundle draw labels resource bundle labels = resource bundle get l a f bundle samples net labels net project p = net project pr drawing editor editor p == { editor = get shared editor } { editor = p get drawing editor } linked list< j tool bar> list = linked list< j tool bar> j tool bar tb tb = j tool bar add creation buttons to tb editor tb set name draw labels get draw tool bar title list add tb tb = j tool bar tool bar button factory add attributes buttons to tb editor tb set name draw labels get attributes tool bar title list add tb tb = j tool bar tool bar button factory add alignment buttons to tb editor tb set name draw labels get alignment tool bar title list add tb list } list< j menu> create menus application a project pr { f i x m e add unconfiguring the menus!! we leak memory! net project p = net project pr resource bundle labels = resource bundle get l a f bundle app labels j menu bar mb = j menu bar linked list< j menu> mb = linked list< j menu> j menu m m2 j menu item mi j radio button menu item rbmi j check box menu item cbmi button group group m = j menu labels configure menu m view cbmi = j check box menu item get action toggle grid actions configure j check box menu item cbmi get action toggle grid m add cbmi m2 = j menu zoom sf scale factors { = sf*100 + % cbmi = j check box menu item get action actions configure j check box menu item cbmi get action m2 add cbmi } m add m2 mb add m mb }} 