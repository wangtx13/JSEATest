/* * @ # transform edit 2 0 2006 01 14 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * ??? */package draw * undo * geom * * /** * transform edit * <p> * f i x m e when we group moves or moves of a composite figure we fail to * coallesce the transform edit events may exhaust memory! * * * @author werner randelshofer * @version 2 0 2006 01 14 changed to support precision coordinates * <br>1 0 2003 12 01 derived from 5 4b1 */public transform edit undoable edit { /** * note owner has access because it is accessed * by composite move edit */ collection< figure> figures affine transform tx /** creates a instance */ transform edit figure figure affine transform tx { figures = linked list< figure> linked list< figure> figures add figure tx = affine transform tx clone } transform edit collection< figure> figures affine transform tx { figures = figures tx = affine transform tx clone } get presentation name { resource bundle labels = resource bundle get l a f bundle draw labels locale get labels get transform figure } add edit undoable edit an edit { an edit transform edit { transform edit that = transform edit an edit that figures == figures { tx concatenate that tx that die } } } replace edit undoable edit an edit { an edit transform edit { transform edit that = transform edit an edit that figures == figures { tx pre concatenate that tx that die } } } redo cannot redo { redo figure f figures { f will change f basic transform tx f changed } } undo cannot undo { undo { affine transform inverse = tx create inverse figure f figures { f will change f basic transform inverse f changed } } noninvertible transform e { e print stack trace } } to { get get name +'@'+hash + tx +tx }} 