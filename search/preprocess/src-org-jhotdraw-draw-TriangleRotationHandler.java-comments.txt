/* * @ # triangle rotation handler 1 0 june 11 2006 * * copyright c 1996 2006 by the original authors of * and all its contributors * all rights reserved * * software is the confidential and proprietary information of * confidential information you shall not disclose * such confidential information and shall use it only in accordance * with the terms of the license agreement you entered into with * ??? */package draw * geom * draw attribute keys * geom * /** * a handle to rotate a triangle figure * based on radius handle * * @author werner randelshofer * original by doug lea at gee sun mar 2 19 15 28 1997 * @version 1 0 june 11 2006 created */public triangle rotation handler handle { rectangle center box attribute keys orientation old value attribute keys orientation value /** creates a instance */ triangle rotation handler triangle figure owner { owner } is combinable with handle h { } point2 d get location { rectangle2 d r = get owner get bounds point2 d p offset = get handlesize o r i e n t a t i o n get get owner { n o r t h p = point2 d r x + r width / 2d r y + offset n o r t h e a s t p = point2 d r x + r width offset r y + offset e a s t p = point2 d r x + r width offset r y + r height / 2d s o u t h e a s t p = point2 d r x + r width offset r y + r height offset s o u t h p = point2 d r x + r width / 2d r y + r height offset s o u t h w e s t p = point2 d r x + offset r y + r height offset w e s t p = point2 d r x + offset r y + r height / 2d n o r t h w e s t p = point2 d r x + offset r y + offset } p } rectangle basic get bounds { point p = view drawing to view get location rectangle r = rectangle p r grow get handlesize / 2 get handlesize / 2 r } track start point anchor modifiers ex { old value = o r i e n t a t i o n get get owner center box = view drawing to view get owner get bounds center box grow center box width / 3 center box height / 3 } track step point anchor point modifiers ex { rectangle rect = rectangle geom outcode center box rect { geom o u t t o p value = attribute keys orientation n o r t h geom o u t t o p | geom o u t r i g h t value = attribute keys orientation n o r t h e a s t geom o u t r i g h t value = attribute keys orientation e a s t geom o u t b o t t o m | geom o u t r i g h t value = attribute keys orientation s o u t h e a s t geom o u t b o t t o m value = attribute keys orientation s o u t h geom o u t b o t t o m | geom o u t l e f t value = attribute keys orientation s o u t h w e s t geom o u t l e f t value = attribute keys orientation w e s t geom o u t t o p | geom o u t l e f t value = attribute keys orientation n o r t h w e s t } f i x m e add undo redo support get owner will change o r i e n t a t i o n basic set get owner value get owner changed update bounds } draw graphics2 d g { draw diamond g color yellow color black } track end point anchor point modifiers ex { value != old value { fire undoable edit happened attribute change edit get owner o r i e n t a t i o n old value value } } } 