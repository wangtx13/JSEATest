save before action 2 0 2006 06 15 2005 2006 staldenmattweg 2 immensee h 6405 switzerland disclose accordance app action io gui gui io app application app project base actions safely performed when project has unsaved changes <p> project has unsaved changes invoked immediately unsaved changes are present dialog shown asking whether user wants discard changes cancel save changes before doing user chooses discard chanegs invoked immediately user chooses cancel action aborted user chooses save changes project saved invoked after project was successfully saved author 2 0 2006 06 15 reworked <br>1 2 2006 05 19 make filename acceptable extension filter <br>1 1 2006 05 03 localized messages <br>1 0 27 september 2005 created save before action project action component old focus owner creates instance save before action application app app action performed action evt project p = get current project p enabled resource bundle labels = resource bundle get l f bundle app labels window ancestor = utilities get window ancestor p get component old focus owner = ancestor == ? ancestor get focus owner p set enabled p has unsaved changes j option pane pane = j option pane <html> + u i manager get option pane css + labels get save before message j option pane r n i n g m e s s g e options = labels get save labels get cancel labels get dont save pane set options options pane set initial value options 0 pane put client property quaqua option pane destructive option 2 j sheet show sheet pane p get component sheet listener option selected sheet evt value = evt get value value == || value equals labels get cancel p set enabled value equals labels get dont save p p set enabled value equals labels get save save changes p p p set enabled old focus owner != old focus owner request focus save changes project p p get == j chooser chooser = p get save chooser option = chooser show save dialog j sheet show save sheet chooser p get component sheet listener option selected sheet evt evt get option == j chooser p p r o v e o p t i o n evt get chooser get filter extension filter = extension filter evt get chooser get filter make acceptable evt get chooser get selected = evt get chooser get selected save p p set enabled old focus owner != old focus owner request focus save p p get save project p p execute worker construct p write i o e e finished value saved p value saved project p value value == p set p mark changes saved p resource bundle labels = resource bundle get l f bundle app labels j sheet show message sheet p get component <html> + u i manager get option pane css + labels get formatted couldnt save value j option pane e r r o r m e s s g e p set enabled old focus owner != old focus owner request focus project p 