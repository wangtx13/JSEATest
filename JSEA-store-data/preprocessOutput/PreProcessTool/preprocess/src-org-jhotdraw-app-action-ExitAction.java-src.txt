exit action 1 0 04 january 2005 1996 2006 disclose accordance app action gui gui io app application app project exits application after letting user save close unsaved projects author 1 0 04 january 2005 created exit action application action = exit component old focus owner project unsaved project creates instance exit action application app app resource bundle labels = resource bundle get l f bundle app labels labels configure action action performed action evt application app = get application app enabled app set enabled unsaved projects count = 0 project document reviewed = project p app projects p has unsaved changes p enabled document reviewed = p unsaved projects count++ unsaved projects count > 0 document reviewed == silently abort project reviewed app set enabled unsaved projects count 0 exit 1 unsaved project = document reviewed old focus owner = utilities get window ancestor unsaved project get component get focus owner unsaved project set enabled j option pane pane = j option pane <html> + u i manager get option pane css + <b> want save changes document + before exiting?< b><p> + t save your changes lost j option pane r n i n g m e s s g e options = save cancel t save pane set options options pane set initial value options 0 pane put client property quaqua option pane destructive option 2 j sheet show sheet pane unsaved project get component sheet listener option selected sheet evt value = evt get value value == || value equals cancel unsaved project set enabled app set enabled value equals t save exit unsaved project set enabled value equals save save changes j option pane pane = j option pane <html> + u i manager get option pane css + <b> have +unsaved projects count+ documents unsaved changes + want + review these changes before quitting?< b><p> + t review your documents + your changes lost j option pane q u e s t i o n m e s s g e options = review changes cancel discard changes pane set options options pane set initial value options 0 pane put client property quaqua option pane destructive option 2 j dialog dialog = pane create dialog app get component dialog set visible value = pane get value value == || value equals cancel app set enabled value equals discard changes exit app set enabled value equals review changes unsaved project = document reviewed review changes save changes unsaved project get == j chooser chooser = unsaved project get save chooser option = chooser show save dialog j sheet show save sheet chooser unsaved project get component sheet listener option selected sheet evt evt get option == j chooser p p r o v e o p t i o n = evt get chooser get selected save unsaved project set enabled old focus owner != old focus owner request focus get application set enabled save unsaved project get review changes unsaved project enabled old focus owner = utilities get window ancestor unsaved project get component get focus owner unsaved project set enabled j option pane pane = j option pane <html> + u i manager get option pane css + <b> want save changes document + before exiting?< b><p> + t save your changes lost j option pane r n i n g m e s s g e options = save cancel t save pane set options options pane set initial value options 0 pane put client property quaqua option pane destructive option 2 j sheet show sheet pane unsaved project get component sheet listener option selected sheet evt value = evt get value value == || value equals cancel unsaved project set enabled get application set enabled value equals t save get application dispose unsaved project review next value equals save save changes review next get application set enabled out review silently aborted save changes review next unsaved project get == j chooser chooser = unsaved project get save chooser option = chooser show save dialog j sheet show save sheet chooser unsaved project get component sheet listener option selected sheet evt evt get option == j chooser p p r o v e o p t i o n = evt get chooser get selected save review next unsaved project set enabled old focus owner != old focus owner request focus get application set enabled save review next unsaved project get review next unsaved projects count = 0 project document reviewed = project p get application projects p has unsaved changes p enabled document reviewed = p unsaved projects count++ unsaved projects count == 0 exit document reviewed != unsaved project = document reviewed review changes get application set enabled out exit silently aborted save unsaved project execute worker construct unsaved project write i o e e finished value saved unsaved project value save review next unsaved project execute worker construct unsaved project write i o e e finished value saved review next unsaved project value saved project unsaved project value value == unsaved project set exit j sheet show message sheet unsaved project get component <html> + u i manager get option pane css + <b> couldn t save \ +file+ \ <p> + reason +value j option pane e r r o r m e s s g e unsaved project set enabled old focus owner != old focus owner request focus get application set enabled saved review next project unsaved project value value == unsaved project set get application dispose unsaved project review next j sheet show message sheet unsaved project get component <html> + u i manager get option pane css + <b> couldn t save \ +file+ \ <p> + reason +value j option pane e r r o r m e s s g e unsaved project set enabled old focus owner != old focus owner request focus get application set enabled exit get application stop exit 0 