text tool 2 0 2006 01 14 1996 2006 disclose accordance ??? draw geom geom tool create edit existing text figures editing behavior overlaying figure providing text floating text area <p> tool interaction done once figure text holder clicked see text holder see floating text area author 2 0 2006 01 14 support coordinates <br>1 0 2003 12 01 derived 5 4b1 text area tool creation tool action listener floating text area text area text holder typing target creates instance text area tool text holder prototype prototype deactivate drawing editor editor end edit deactivate editor pressed figure text holder edited otherwise text figure created mouse pressed mouse e text holder text holder = figure pressed figure = get drawing find figure inside get view view drawing point e get x e get y pressed figure text holder text holder = text holder pressed figure !text holder editable text holder = text holder != created figure = begin edit text holder typing target != end edit fire tool done mouse pressed e update view so created figure drawn before floating text figure overlaid note f damage should standard drawing view when overlay figure drawn because j text field cannot scrolled view check damage text holder = text holder get created figure begin edit text holder mouse dragged mouse e begin edit text holder text holder text area == text area = floating text area text area add action listener text holder != typing target typing target != end edit text area create overlay get view text holder text area set bounds get field bounds text holder text holder get text text area request focus typing target = text holder rectangle2 d get field bounds text holder figure rectangle2 d r = figure get bounds insets2 d insets = figure get insets r = rectangle2 d r x + insets left r y + insets top r width insets left insets right r height insets top insets bottom f i x m e find way determine grow r grow 1 2 r width += 16 r x = 1 r y = 2 r width += 18 r height += 4 r mouse released mouse evt created figure != text holder text holder = text holder created figure rectangle2 d bounds = created figure get bounds bounds width == 0 bounds height == 0 get drawing remove created figure bounds width < 5 bounds height < 5 created figure change created figure basic set bounds point2 d bounds x bounds y point2 d bounds x + 100 bounds y + 100 created figure get view add selection created figure created figure composite figure composite figure created figure layout created figure = get drawing fire undoable edit happened creation edit begin edit text holder end edit typing target != text area get text length > 0 typing target set text text area get text created figure != get drawing fire undoable edit happened creation edit created figure = created figure != get drawing remove figure get figure typing target set text nothing undo set undo activity typing target = text area end overlay view check damage action performed action end edit fire tool done 