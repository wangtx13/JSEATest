bezier tool 1 1 2006 07 12 1996 2006 disclose accordance draw undo geom geom tool scribble bezier figure author 1 1 2006 07 12 extended support subclassing <br>1 0 2006 01 21 created bezier tool tool finish when mouse released map< attribute key object> attributes prototype figures bezier figure prototype created figure bezier figure created figure composite edit creation edit node count before drag creates instance bezier tool bezier figure prototype prototype creates instance bezier tool bezier figure prototype map attributes prototype = prototype attributes = attributes draw graphics2 d g created figure != mouse location != point2 d p = created figure get end point g set color color black g set stroke basic stroke g draw line p x p y mouse location x mouse location y activate drawing editor editor activate editor get view clear selection get view set cursor cursor get predefined cursor cursor r o s s h i r u r s o r deactivate drawing editor editor deactivate editor get view set cursor cursor get cursor created figure != finish creation created figure created figure = get drawing fire undoable edit happened creation edit mouse pressed mouse evt mouse pressed evt created figure == finish when mouse released = creation edit = composite edit figur erstellen get drawing fire undoable edit happened creation edit created figure = create figure created figure add node bezier path node get view get constrainer constrain point get view view drawing anchor get drawing add created figure node count before drag = created figure get node count evt get click count == 1 add point figure get view get constrainer constrain point get view view drawing anchor node count before drag = created figure get node count bezier figure create figure bezier figure f = bezier figure prototype clone get editor apply attributes f attributes != map entry< attribute key object> entry attributes entry set f set attribute entry get key entry get value f figure get created figure created figure figure get figure created figure add point figure point2 d point point count = created figure get node count created figure change point count < 2 created figure basic add node bezier path node point point2 d end point = created figure get end point point2 d second last point = point count <= 1 ? end point created figure get point point count 2 0 point equals end point nothing point count > 1 geom line contains point point x point y second last point x second last point y end point x end point y 0 9f get view get scale factor created figure basic set point point count 1 0 point created figure basic add node bezier path node point created figure mouse clicked mouse evt created figure != evt get click count 1 created figure get node count > 2 rectangle r = rectangle get view drawing view created figure get start point r grow 2 2 r contains evt get x evt get y created figure set closed get view add selection created figure finish creation created figure get drawing fire undoable edit happened creation edit created figure = fire tool done 2 finish when mouse released = finish creation created figure get view add selection created figure get drawing fire undoable edit happened creation edit created figure = fire tool done mouse released mouse evt finish when mouse released == t r u e created figure get node count > 2 bezier path fitted path = bezier fit bezier curve created figure get bezier path 1 created figure change created figure basic set bezier path fitted path created figure finish creation created figure created figure = get drawing fire undoable edit happened creation edit finish when mouse released = fire tool done finish when mouse released == finish when mouse released = f l s e created figure get node count > node count before drag + 1 created figure change bezier path fitted path = bezier path i=node count before drag n = created figure get node count i < n i++ fitted path add created figure get node node count before drag created figure basic remove node node count before drag fitted path = bezier fit bezier curve fitted path 1 bezier path node node fitted path created figure basic add node node node count before drag = created figure get node count created figure finish creation bezier figure created figure get view add selection created figure mouse dragged mouse evt created figure != finish when mouse released == finish when mouse released = t r u e x = evt get x y = evt get y add point figure get view view drawing point x y mouse moved mouse evt created figure != 