rotate handle 1 0 12 july 2006 1996 2006 disclose accordance draw undo geom geom handle rotate figure author 1 0 12 july 2006 created rotate handle handle point location restore data affine transform transform point2 d center start theta start length creates instance rotate handle figure owner owner combinable handle h draws handle draw graphics2 d g draw diamond g color green color black rectangle basic get bounds rectangle r = rectangle get location r grow get handlesize 2 get handlesize 2 r point get location location == location = view drawing view get location point2 d get handle placed above figure we move up handlesizes so won t overlap handles box handle kit rectangle2 d bounds = get owner get bounds point2 d bounds get center x bounds y get handlesize track start point anchor modifiers ex location = point anchor x anchor y restore data = get owner get restore data rectangle2 d bounds = get owner get bounds transform = affine transform center = point2 d bounds get center x bounds get center y point2 d anchor point = view view drawing anchor start theta = geom angle center x center y anchor point x anchor point y start length = geom length center x center y anchor point x anchor point y track step point anchor point modifiers ex location = point x y point2 d point = view view drawing step theta = geom angle center x center y point x point y step length = geom length center x center y point x point y transform set identity transform translate center x center y transform rotate step theta start theta transform translate center x center y get owner change get owner restore restore data get owner basic transform transform get owner track end point anchor point modifiers ex view get drawing fire undoable edit happened restore data edit get owner restore data location = 