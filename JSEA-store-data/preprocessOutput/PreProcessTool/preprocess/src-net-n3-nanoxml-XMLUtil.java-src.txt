xml nano xml $ revision 1 5 $ $ date 2002 02 03 21 19 38 $ $ r e l e s e 2 2 1 $ nano xml 2 2000 2002 purpose 1 2 3 net n3 io i o io reader io reader utility nano xml author $ r e l e s e 2 2 1 $ $ revision 1 5 $ xml skips remainder comment assumed lt ! already read reader reader io i o occurred reading data skip comment i xml reader reader i o xml parse reader read != xml expected input reader get reader get line nr <! dashes read = 0 ch = reader read ch dashes read++ > dashes read == 2 dashes read = 0 skips remainder current xml tag reader reader io i o occurred reading data skip tag i xml reader reader i o xml parse level = 1 level > 0 ch = reader read ch < ++level > level scans contain reader reader io i o occurred reading data scan buffer i xml reader reader i o xml parse ! xml check literal reader u b l i xml skip whitespace reader append xml scan reader \0 xml skip whitespace reader xml scan reader \0 scans reader reader io i o occurred reading data scan i xml reader reader i o xml parse ! xml check literal reader y s t e m xml skip whitespace reader xml scan reader \0 retrieves identifier data reader reader io i o occurred reading data scan identifier i xml reader reader i o xml parse buffer result = buffer ch = reader read ch == || ch == || ch == || ch == || ch >= ch <= z || ch >= ch <= z || ch >= 0 ch <= 9 || ch > \u007 e result append ch reader unread ch result retrieves delimited data reader reader entity escape character amp % entity resolver entity resolver io i o occurred reading data scan i xml reader reader entity i xml entity resolver entity resolver i o xml parse buffer result = buffer starting level = reader get stream level delim = reader read delim != \ delim != xml expected input reader get reader get line nr delimited str = xml read reader entity ch = str at 0 ch == entity str at 1 == result append xml process literal str xml process entity str reader entity resolver ch == reader unread ch str = xml read reader str at 1 == result append xml process literal str result append str reader get stream level == starting level ch == delim ch == 9 || ch == 10 || ch == 13 result append result append ch result append ch result processes entity entity entity reader reader entity resolver entity resolver io i o occurred reading data process entity entity i xml reader reader i xml entity resolver entity resolver i o xml parse entity = entity substring 1 entity length 1 reader entity reader = entity resolver get entity reader entity entity reader == xml invalid entity reader get reader get line nr entity external entity = entity resolver external entity entity reader start stream entity reader !external entity processes character literal entity entity io i o occurred reading data process literal entity i o xml parse entity at 2 == x entity = entity substring 3 entity length 1 parse entity 16 entity = entity substring 2 entity length 1 parse entity 10 skips whitespace reader reader reader buffer where put whitespace whitespace does have stored io i o occurred reading data skip whitespace i xml reader reader buffer buffer i o ch buffer == ch = reader read ch == || ch == || ch == ch = reader read ch != ch != ch != ch == buffer append buffer append reader unread ch reads character reader reader reader entity escape character amp % used indicate entity character entity expression like e g amp lt io i o occurred reading data read i xml reader reader entity i o xml parse ch = reader read buffer buf = buffer buf append ch ch == entity ch != ch = reader read buf append ch buf reads character reader disallowing entities reader reader entity escape character amp % used indicate entity read i xml reader reader entity i o xml parse str = xml read reader entity ch = str at 0 ch == entity xml unexpected entity reader get reader get line nr str ch data starts < i>literal< i> enough chars are read determine result reader reader literal literal check io i o occurred reading data check literal i xml reader reader literal i o xml parse i = 0 i < literal length i++ reader read != literal at i xml parse indicate expected encountered data line nr line number data expected expected expected input line nr expected xml parse xml parse line nr expected + expected xml parse indicate entity could resolved data line nr line number data entity entity invalid entity line nr entity xml parse xml parse line nr invalid entity ` + entity + xml parse indicate entity reference unexpected at point data line nr line number data entity entity unexpected entity line nr entity xml parse xml parse line nr entity reference expected here + entity + xml parse indicate d t section unexpected at point data line nr line number data unexpected d t line nr xml parse xml parse line nr d t section expected here xml parse indicate expected at point data line nr line number data unexpected unexpected invalid input line nr unexpected xml parse xml parse line nr invalid input + unexpected xml parse indicate closing tag element does match opening tag data line nr line number data expected opening tag wrong closing tag wrong closing tag line nr expected wrong xml parse xml parse line nr closing tag does match opening tag ` + wrong + != ` + expected + xml parse indicate extra data encountered closing tag data line nr line number data closing tag empty line nr xml parse xml parse line nr closing tag empty xml validation indicate element missing data line nr line number data parent element parent element missing element missing element missing element line nr parent element missing element xml validation xml validation xml validation m i s s i n g e l e m e n t line nr missing element attribute attribute value element + parent element + expects have + missing element xml validation indicate element unexpected data line nr line number data parent element parent element unexpected element unexpected element unexpected element line nr parent element unexpected element xml validation xml validation xml validation u n e x p e t e d e l e m e n t line nr unexpected element attribute attribute value unexpected + unexpected element + + parent element xml validation indicate attribute missing data line nr line number data element element attribute missing attribute missing attribute line nr element attribute xml validation xml validation xml validation m i s s i n g t t r i b u t e line nr element attribute attribute value element + element + expects attribute named + attribute xml validation indicate attribute unexpected data line nr line number data element element attribute unexpected attribute unexpected attribute line nr element attribute xml validation xml validation xml validation u n e x p e t e d t t r i b u t e line nr element attribute attribute value element + element + did expect attribute + named + attribute xml validation indicate attribute has invalid value data line nr line number data element element attribute attribute attribute value value attribute invalid attribute value line nr element attribute attribute value xml validation xml validation xml validation t t r i b u t e i t h i n v l v l u e line nr element attribute attribute value invalid value attribute + attribute xml validation indicate p d t element was missing data line nr line number data parent element parent element missing p data line nr parent element xml validation xml validation xml validation m i s s i n g p d t line nr element attribute attribute value missing p d t element + parent element xml validation indicate p d t element was unexpected data line nr line number data parent element parent element unexpected p data line nr parent element xml validation xml validation xml validation u n e x p e t e d p d t line nr element attribute attribute value unexpected p d t element + parent element xml validation data line nr line number data message message element element attribute attribute attribute value value attribute validation line nr message element attribute attribute value xml validation xml validation xml validation m i s e r r o r line nr element attribute attribute value message 