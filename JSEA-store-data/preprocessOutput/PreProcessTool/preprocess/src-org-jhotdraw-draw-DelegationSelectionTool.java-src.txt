delegation selection tool 2 0 2006 02 21 1996 2006 disclose accordance ??? draw geom app action actions selection tool which recognizes clicks popup menu triggers click popup trigger encountered hook called which handles overriden subclasse provide customized behaviour <p> tool delegates mouse events specific tool figure which has been clicked provides specialized tool author 2 0 2006 01 18 support precision coordinates popup timer support radio button menu items <br>1 0 2003 12 01 derived 5 4b1 delegation selection tool selection tool set actions which applied drawing collection< action> drawing actions set actions which applied selection figures collection< action> selection actions we timer show popup menu when user presses mouse key second moving mouse timer popup timer when popup menu visible we track mouse movements j popup menu popup menu creates instance delegation selection tool linked list< action> linked list< action> creates instance delegation selection tool collection< action> drawing actions collection< action> selection actions drawing actions = drawing actions selection actions = selection actions set drawing actions collection< action> drawing actions drawing actions = drawing actions set figure actions collection< action> selection actions selection actions = selection actions mouse listener mouse pressed events popup trigger has been activated then appropriate hook called mouse pressed mouse evt popup timer != popup timer stop popup timer = x x x when we want support multiple views we have implement set view drawing view e get evt popup trigger handle popup menu evt mouse pressed evt popup timer = timer 1000 action listener action performed action aevt handle popup menu evt popup timer = popup timer set repeats popup timer start mouse listener mouse released events popup trigger has been activated then appropriate hook called mouse released mouse evt popup timer != popup timer stop popup timer = mouse released evt evt popup trigger handle popup menu evt mouse dragged mouse evt popup timer != popup timer stop popup timer = popup menu == || ! popup menu visible mouse dragged evt mouse clicked mouse evt mouse clicked evt evt get click count == 2 handle click evt hook which overriden subclasses provide specialised behaviour popup trigger handle popup menu mouse evt point p = point evt get x evt get y figure figure = get view find figure p figure != || drawing actions size > 0 show popup menu figure p evt get component popup menu = show popup menu figure figure point p component j popup menu menu = j popup menu popup menu = menu j menu submenu = submenu = linked list< action> popup actions = linked list< action> figure != linked list< action> figure actions = linked list< action> figure get actions view drawing p popup actions size != 0 figure actions size != 0 popup actions add popup actions add figure actions popup actions size != 0 selection actions size != 0 popup actions add popup actions add selection actions popup actions size != 0 drawing actions size != 0 popup actions add popup actions add drawing actions hash map< button group> button groups = hash map< button group> action popup actions != get value actions s u b m e n u k e y != submenu == || ! submenu equals get value actions s u b m e n u k e y submenu = get value actions s u b m e n u k e y submenu = j menu submenu menu add submenu submenu = submenu = == submenu != submenu add separator menu add separator button button get value actions b u t t o n g r o u p k e y != button group bg = button groups get get value actions b u t t o n g r o u p k e y bg == bg = button group button groups put get value actions b u t t o n g r o u p k e y bg button = j radio button menu item bg add button button set selected get value actions s e l e t e d k e y == t r u e get value actions s e l e t e d k e y != button = j check box menu item button set selected get value actions s e l e t e d k e y == t r u e button = j menu item submenu != submenu add button menu add button menu show p x p y hook which overriden subclasses provide specialised behaviour click handle click mouse evt drawing view v = get view point pos = point evt get x evt get y handle handle = v find handle pos handle != handle track click pos evt get modifiers ex point2 d p = view drawing pos figure outer figure = get view find figure pos figure figure = outer figure figure != tool figure tool = figure get tool p figure tool == figure = get drawing find figure inside p figure != figure tool = figure get tool p figure tool != set tracker figure tool figure tool mouse pressed evt outer figure handle mouse click p evt get view v clear selection v add selection outer figure v clear selection v add selection outer figure v set handle detail level v get handle detail level == 1 ? 0 1 v set handle detail level v get handle detail level + 1 