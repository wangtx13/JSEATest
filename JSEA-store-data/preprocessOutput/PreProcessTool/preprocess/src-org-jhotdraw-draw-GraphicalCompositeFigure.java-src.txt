graphical composite figure 2 0 2006 01 14 1996 2006 disclose accordance ??? draw io i o geom undo draw attribute keys geom xml dom input xml dom output graphical composite figure fills gap between composite figure other figures which mainly have presentation purpose graphical composite figure configured figure which takes over task rendering graphical presentation composite figure therefore graphical composite figure manages contained figures like composite figure does delegates graphical presentation another graphical figure which purpose draw container contained figures graphical composite figure adds link composite figure composite figure containing presentation figure which normally link composite figure composite figure seen containing figure because has mechanism draw itself instead relies on contained figures draw themselves thereby giving link composite figure composite figure appearance however <b> graphical composite figure< b> s presentation figure draw itself even when <b> graphical composite figure< b> contains other figures <b> graphical composite figure< b> also uses link layouter layouter layout contained figures author wolfram kaiser derived 2 0 2006 01 14 support precision coordinates <br>1 0 1 dezember 2003 derived 5 4b1 graphical composite figure composite figure hash map< attribute key object> attributes = hash map< attribute key object> hash set< attribute key> forbidden attributes figure which performs presentation tasks composite figure composite figures usually t have own presentation present sum children figure presentation figure handles figure changes children presentation figure handler presentation figure handler = presentation figure handler presentation figure handler figure listener undoable edit listener graphical composite figure owner presentation figure handler graphical composite figure owner owner = owner figure request remove figure e owner remove e get figure figure figure evt figure figure e ! owner changing owner change owner fire figure e owner figure figure e figure attribute figure e figure area invalidated figure e ! owner changing owner fire area invalidated e get invalidated area undoable edit happened undoable edit e owner fire undoable edit happened e get edit constructor which uses nothing presentation figure constructor needed storable mechanism graphical composite figure constructor which creates graphical composite figure given graphical figure presenting presentation figure figure which renders container graphical composite figure figure presentation figure set presentation figure presentation figure logcal display area delegated encapsulated presentation figure rectangle2 d get bounds get presentation figure == get bounds get presentation figure get bounds contains point2 d p get presentation figure != get presentation figure contains p contains p add notify drawing drawing add notify drawing get presentation figure != get presentation figure add notify drawing remove notify drawing drawing remove notify drawing get presentation figure != get presentation figure remove notify drawing draw area delegated encapsulated presentation figure rectangle2 d get figure draw bounds rectangle2 d r get presentation figure != rectangle2 d presentation bounds = get presentation figure get draw bounds r = get figure draw bounds r empty r = presentation bounds r add presentation bounds r = get figure draw bounds r moves figure subclassers override clients usually call display box basic set bounds point2 d anchor point2 d get layouter == basic set bounds anchor basic set presentation figure bounds anchor rectangle2 d r = get layouter layout anchor basic set presentation figure bounds point2 d r get x r get y point2 d math x r get x math y r get y invalidate basic set bounds point2 d anchor point2 d basic set bounds anchor basic set presentation figure bounds point2 d anchor point2 d get presentation figure != get presentation figure basic set bounds anchor standard presentation which delegated encapsulated presentation figure presentation figure moved well contained figures basic transform affine transform tx basic transform tx get presentation figure != get presentation figure basic transform tx draw figure delegated encapsulated presentation figure draw figure graphics2 d g draw presentation figure g draw figure g draw presentation figure graphics2 d g get presentation figure != get presentation figure draw g handles presentation figure collection< handle> create handles detail level linked list< handle> handles = linked list< handle> detail level == 0 move handle add move handles handles handles get presentation figure get handles set figure which renders composite figure presentation tasks composite figure are delegated presentation figure presentation figure figure takes over presentation tasks set presentation figure figure presentation figure presentation figure != presentation figure remove figure listener presentation figure handler presentation figure remove undoable edit listener presentation figure handler get drawing != presentation figure remove notify get drawing presentation figure = presentation figure presentation figure != presentation figure add figure listener presentation figure handler presentation figure add undoable edit listener presentation figure handler get drawing != presentation figure add notify get drawing f i x m e we should calculate layout here get figure which renders composite figure presentation tasks composite figure are delegated presentation figure figure takes over presentation tasks figure get presentation figure presentation figure graphical composite figure clone graphical composite figure = graphical composite figure clone presentation figure = presentation figure == ? figure presentation figure clone presentation figure != presentation figure add figure listener presentation figure handler presentation figure add undoable edit listener presentation figure handler remap hash map< figure figure> old remap old presentation figure != presentation figure remap old sets attribute figure attribute key semantics are defined implementing figure set attribute attribute key key value forbidden attributes == || ! forbidden attributes contains key change get presentation figure != get presentation figure set attribute key value set attribute key value old value = attributes put key value fire attribute key old value value fire undoable edit happened attribute change edit key old value value sets attribute figure attribute key semantics are defined implementing figure basic set attribute attribute key key value forbidden attributes == || ! forbidden attributes contains key get presentation figure != get presentation figure basic set attribute key value basic set attribute key value old value = attributes put key value set attribute enabled attribute key key b forbidden attributes == forbidden attributes = hash set< attribute key> b forbidden attributes remove key forbidden attributes add key gets attribute figure get attribute attribute key key get presentation figure != get presentation figure get attribute key ! attributes contains key key ? key get value attributes get key applies attributes figure figure apply attributes figure map entry< attribute key object> entry attributes entry set set attribute entry get key entry get value write attributes dom output out i o figure prototype = figure out get prototype element open = map entry< attribute key object> entry attributes entry set attribute key key = entry get key forbidden attributes == || ! forbidden attributes contains key prototype value = key get prototype attribute value = key get prototype value != attribute value || prototype value != attribute value != ! prototype value equals attribute value ! element open out open element element open = out open element key get key out write entry get value out close element element open out close element read attributes dom input i o get element count > 0 open element i=in get element count 1 i >= 0 i open element i = get tag value = read attribute key key = get attribute key key != key assignable value forbidden attributes == || ! forbidden attributes contains key set attribute key value close element close element attribute key get attribute key attribute keys supported attribute map get map< attribute key object> get attributes hash map< attribute key object> attributes chops point at rectangle get bounds figure <p> figures which have non rectangular shape need override <p> takes attributes account attribute keys s t r o k e o l o r attribute keys s t r o k e p l e m e n t attribute keys stroke total width point2 d chop point2 d rectangle2 d r = get bounds s t r o k e o l o r get != grow s t r o k e p l e m e n t get e n t e r grow = attribute keys get stroke total width o u t s e grow = attribute keys get stroke total width i n s e grow = 0d geom grow r grow grow geom angle point r geom point angle r 