attributed figure 3 1 2006 06 17 1996 2006 disclose accordance draw geom io draw attribute keys geom xml dom input xml dom output figure keep track open ended set attributes <p> f i x m e move convenience attribute getter attribute keys author 3 1 2006 06 17 chop point2 d <br>3 0 2006 06 07 reworked <br>2 1 2006 02 20 support stroke <br>2 0 2006 01 14 support precision coordinates <br>1 0 2003 12 01 derived 5 4b1 attributed figure figure hash map< attribute key object> attributes = hash map< attribute key object> forbidden attributes t set set attribute operation they basic set attribute hash set< attribute key> forbidden attributes creates instance attributed figure sets attribute figure attribute key semantics are defined implementing figure set attribute attribute key key value forbidden attributes == || ! forbidden attributes contains key old value = attributes get key ! attributes contains key key || old value != value || old value != value != ! old value equals value change basic set attribute key value fire attribute key old value value fire undoable edit happened attribute change edit key old value value set attribute enabled attribute key key b forbidden attributes == forbidden attributes = hash set< attribute key> b forbidden attributes remove key forbidden attributes add key attribute enabled attribute key key forbidden attributes == || ! forbidden attributes contains key set attributes hash map< attribute key object> map map entry< attribute key object> entry map entry set set attribute entry get key entry get value map< attribute key object> get attributes hash map< attribute key object> attributes sets attribute figure attribute key semantics are defined implementing figure basic set attribute attribute key key value forbidden attributes == || ! forbidden attributes contains key attributes put key value gets attribute figure get attribute attribute key key has attribute key ? attributes get key key get value draw figure graphics2 d g attribute keys f i l l o l o r get != g set color attribute keys f i l l o l o r get draw fill g s t r o k e o l o r get != s t r o k e t h get > 0d g set stroke attribute keys get stroke g set color s t r o k e o l o r get draw stroke g t e x t o l o r get != t e x t s h d o o l o r get != t e x t s h d o o f f s e t get != dimension2 d d = t e x t s h d o o f f s e t get g translate d width d height g set color t e x t s h d o o l o r get draw text g g translate d width d height g set color t e x t o l o r get draw text g connectors visible draw connectors g draw connectors graphics2 d g stroke get stroke attribute keys get stroke get stroke miter limit factor number value = number get attribute attribute keys s t r o k e m i t e r l i m i t f t o r value != ? value value 10f rectangle2 d get figure draw bounds width = attribute keys get stroke total width 2d s t r o k e j o i n get == basic stroke j o i n m i t e r width = s t r o k e m i t e r l i m i t f t o r get width++ rectangle2 d r = get bounds geom grow r width width r called draw draw fill area figure attributed figure configures graphics2 d f i l l o l o r attribute before calling f i l l o l o r attribute called draw fill graphics2 d g called draw draw lines figure attributed figure configures graphics2 d s t r o k e o l o r attribute before calling s t r o k e o l o r attribute called called draw draw text figure attributed figure configures graphics2 d t e x t o l o r attribute before calling t e x t o l o r attribute called draw stroke graphics2 d g draw text graphics2 d g attributed figure clone attributed figure = attributed figure clone attributes = hash map< attribute key object> attributes forbidden attributes != forbidden attributes = hash set< attribute key> forbidden attributes write attributes dom output out i o figure prototype = figure out get prototype element open = map entry< attribute key object> entry attributes entry set attribute key key = entry get key forbidden attributes == || ! forbidden attributes contains key prototype value = key get prototype attribute value = key get prototype value != attribute value || prototype value != attribute value != ! prototype value equals attribute value ! element open out open element element open = out open element key get key out write entry get value out close element element open out close element read attributes dom input i o get element count > 0 open element i=in get element count 1 i >= 0 i open element i = get tag value = read attribute key key = get attribute key key != key assignable value forbidden attributes == || ! forbidden attributes contains key set attribute key value close element close element attribute key get attribute key attribute keys supported attribute map get applies attributes figure figure apply attributes figure map entry< attribute key object> entry attributes entry set set attribute entry get key entry get value write dom output out i o rectangle2 d r = get bounds out add attribute x r x out add attribute y r y out add attribute r width out add attribute h r height write attributes out read dom input i o x = get attribute x 0d y = get attribute y 0d = get attribute 0d h = get attribute h 0d set bounds point2 d x y point2 d x+w y+h read attributes remove attribute attribute key key has attribute key old value = get attribute key attributes remove key fire attribute key old value key get value has attribute attribute key key attributes contains key key 