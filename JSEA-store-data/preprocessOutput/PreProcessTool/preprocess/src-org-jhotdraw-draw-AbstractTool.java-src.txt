tool 3 0 2006 02 15 1996 2006 disclose accordance ??? draw undo composite edit geom tool author 3 0 2006 02 15 updated handle multiple views <br>2 0 2006 01 14 support precision coordinates <br>1 0 2003 12 01 derived 5 4b1 tool tool set active tool editor active set tool doing some work prevents current view when mouse enter received working drawing editor editor point anchor = point listener list listener list = listener list creates instance tool add undoable edit listener undoable edit listener l listener list add undoable edit listener l remove undoable edit listener undoable edit listener l listener list remove undoable edit listener l activate drawing editor editor editor = editor active = editor get view request focus deactivate drawing editor editor editor = editor active = active active drawing view get view editor get view drawing editor get editor editor drawing get drawing get view get drawing point2 d view drawing point p constrain point get view view drawing p point2 d constrain point point p constrain point get view view drawing p point2 d constrain point point2 d p get view get constrainer constrain point p deletes selection depending on tool could selected figures selected points selected text edit delete get view get drawing remove get view get selected figures cuts selection clipboard depending on tool could selected figures selected points selected text edit cut copies selection clipboard depending on tool could selected figures selected points selected text edit copy duplicates selection depending on tool could selected figures selected points selected text edit duplicate pastes contents clipboard depending on tool could selected figures selected points selected text edit paste key released key evt fire tool done key typed key evt key pressed key evt evt get container editor set view editor find view container evt get fire tool started evt get composite edit edit evt get key key v k d e l e t e key v k b k s p e edit delete key v k evt get modifiers key t r l m s k | key m e t m s k != 0 get view add selection get view get drawing get figures key v k l e f t collection< figure> figures = get view get selected figures affine transform tx = affine transform tx translate 1 0 figure f figures f change f basic transform tx f get drawing fire undoable edit happened transform edit figures tx key v k r i g h t collection< figure> figures = get view get selected figures affine transform tx = affine transform tx translate 1 0 figure f figures f change f basic transform tx f get drawing fire undoable edit happened transform edit figures tx key v k u p collection< figure> figures = get view get selected figures affine transform tx = affine transform tx translate 0 1 figure f figures f change f basic transform tx f get drawing fire undoable edit happened transform edit figures tx key v k d o n collection< figure> figures = get view get selected figures get drawing fire undoable edit happened edit = composite edit figur en verschieben affine transform tx = affine transform tx translate 0 1 figure f figures f change f basic transform tx f get drawing fire undoable edit happened transform edit figures tx mouse clicked mouse evt mouse mouse evt ! working editor set view editor find view container evt get mouse exited mouse evt mouse moved mouse evt mouse pressed mouse evt drawing view view = editor find view container evt get view request focus anchor = point evt get x evt get y working = fire tool started view mouse released mouse evt working = add tool listener tool listener l listener list add tool listener l remove tool listener tool listener l listener list remove tool listener l notify listener list have registered interest notification on type fire tool started drawing view view tool = notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 listeners i == tool listener lazily create == = tool view rectangle 0 0 1 1 tool listener listeners i+1 tool started notify listener list have registered interest notification on type fire tool done tool = notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 listeners i == tool listener lazily create == = tool get view rectangle 0 0 1 1 tool listener listeners i+1 tool done notify listener list have registered interest notification on type fire area invalidated rectangle2 d r point p1 = get view drawing view point2 d r x r y point p2 = get view drawing view point2 d r x+r width r y+r height fire area invalidated rectangle p1 x p1 y p2 x p1 x p2 y p1 y notify listener list have registered interest notification on type fire area invalidated rectangle invalidated area tool = notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 listeners i == tool listener lazily create == = tool get view invalidated area tool listener listeners i+1 area invalidated draw graphics2 d g update cursor drawing view view point p handle handle = view find handle p handle != view set cursor handle get cursor figure figure = view find figure p figure != view set cursor figure get cursor view view drawing p view set cursor cursor get cursor 