figure 3 3 2006 06 17 1996 2006 disclose accordance draw font geom undo io geom figure provides functionality managing listeners figure author 3 3 reworked <br>3 2 2006 01 05 get changing depth <br>3 0 2006 01 20 reworked j2 s e 1 5 <br>1 0 2003 12 01 derived 5 4b1 figure figure listener list listener list = listener list connectors visible connection figure courting connection drawing drawing interactive visible = figure decorator draw decorator first = we increase number on each invocation change decrease on each invocation changing depth = 0 creates instance figure d r i n g s h p e n d b o u n d s t t r i b u t e s e d i t i n g o n n e t i n g o m p o s i t e f i g u r e s l o n i n g e v e n t h n d l i n g add figure listener figure listener l listener list add figure listener l remove figure listener figure listener l listener list remove figure listener l add undoable edit listener undoable edit listener l listener list add undoable edit listener l remove undoable edit listener undoable edit listener l listener list remove undoable edit listener l add notify drawing d drawing = d fire figure remove notify drawing d fire figure drawing = drawing get drawing drawing get lock get drawing == ? get drawing get lock set draw decorator first value draw decorator first = value draw decorator first draw decorator first notify listener list have registered interest notification on type fire area invalidated fire area invalidated get draw bounds notify listener list have registered interest notification on type fire area invalidated rectangle2 d invalidated area listener list get listener count > 0 figure = notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 listeners i == figure listener lazily create == = figure invalidated area figure listener listeners i+1 figure area invalidated notify listener list have registered interest notification on type fire figure request remove listener list get listener count > 0 figure = notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 listeners i == figure listener lazily create == = figure get bounds figure listener listeners i+1 figure request remove notify listener list have registered interest notification on type fire figure listener list get listener count > 0 figure = notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 listeners i == figure listener lazily create == = figure get bounds figure listener listeners i+1 figure notify listener list have registered interest notification on type fire figure listener list get listener count > 0 figure = notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 listeners i == figure listener lazily create == = figure get bounds figure listener listeners i+1 figure fire figure fire figure get bounds notify listener list have registered interest notification on type fire figure rectangle2 d area listener list get listener count > 0 figure = notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 listeners i == figure listener lazily create == = figure area figure listener listeners i+1 figure fire figure figure listener list get listener count > 0 notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 listeners i == figure listener lazily create figure listener listeners i+1 figure notify listener list have registered interest notification on type fire attribute attribute key attribute old value value listener list get listener count > 0 figure = notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 listeners i == figure listener lazily create == = figure attribute old value value figure listener listeners i+1 figure attribute notify listener list have registered interest notification on type fire undoable edit happened undoable edit edit undoable edit = listener list get listener count > 0 notify listeners have registered interest guaranteed non listeners = listener list get listener list process listeners last first notifying those are interested i = listeners length 2 i>=0 i =2 == = undoable edit edit listeners i == undoable edit listener undoable edit listener listeners i+1 undoable edit happened set create handles hash set figure clone figure = figure clone listener list = listener list connectors visible = courting connection = decorator != decorator = figure decorator clone clone supported e internal = internal e get message init cause e figure basic clone hash map< figure figure> old x x x delete me remap hash map< figure figure> old collection< handle> create handles detail level linked list< handle> handles = linked list< handle> detail level == 0 box handle kit add box handles handles handles cursor get cursor point2 d p contains p cursor get predefined cursor cursor h n d u r s o r cursor get cursor set bounds rectangle2 d bounds set bounds point2 d bounds x bounds y point2 d bounds x + bounds width bounds y + bounds height set bounds point2 d anchor point2 d point2 d old anchor = get start point point2 d old = get end point ! old anchor equals anchor || ! old equals change basic set bounds anchor fire undoable edit happened set bounds edit old anchor old anchor checks figure connected figures connected connect informs figure needs redrawn invalidate fire area invalidated get draw bounds changing changing depth != 0 get changing depth changing depth informs figure about change something affects contents display box change changing depth++ invalidate validate informs figure area display box changing depth <= 1 validate fire figure get draw bounds changing depth = 0 changing depth transforms geometry figure transform affine transform tx change basic transform tx fire undoable edit happened transform edit tx moves figure subclasses override <p> basic operation which events are fired basic transform affine transform ty figures connector specified location chop box connector see chop box connector connector find connector point2 d p connection figure prototype chop box connector includes figure figure figure == figure find figure inside point2 d p contains p ? connector find compatible connector connector start chop box connector collection actions which are presented user popup menu <p> collection contain entries these entries are used interpreted separators popup menu collection< action> get actions point2 d p empty list specialized tool given coordinate <p> specialized tool available tool get tool point2 d p handles mouse click handle mouse click point2 d p mouse evt drawing view view handle drop point2 d p collection< figure> dropped figures drawing view view point2 d get end point rectangle2 d r = get bounds point2 d r x + r width r y + r height point2 d get start point rectangle2 d r = get bounds point2 d r x r y rectangle2 d get hit bounds get bounds dimension2 d get preferred size rectangle2 d r = get bounds dimension2 d r width r height remap map old interactive interactive set interactive b interactive = b visible visible set visible value value != visible change visible = value set connectors visible visible connection figure connection change connectors visible = visible courting connection = connection connectors visible connectors visible connection figure get courting connection courting connection collection< figure> get decomposition linked list< figure> list = linked list< figure> list add list font render context get font render context font render context frc = frc == frc = font render context affine transform options text antialiased options fractional metrics frc request remove fire figure request remove get layer 0 get tooltip point2 d p set decorator figure value change decorator = value decorator != decorator basic set bounds get start point get end point figure get decorator decorator draw graphics2 d g draw decorator first draw decorator g draw figure g draw figure g draw decorator g draw figure graphics2 d g draw decorator graphics2 d g decorator != update decorator bounds decorator draw g update decorator bounds decorator != point2 d sp = get start point point2 d ep = get end point insets2 d decorator insets = attribute keys d e o r t o r i n s e t s get sp x = decorator insets left sp y = decorator insets top ep x += decorator insets right ep y += decorator insets bottom decorator basic set bounds sp ep rectangle2 d get draw bounds rectangle2 d figure draw bounds = get figure draw bounds decorator != update decorator bounds figure draw bounds add decorator get draw bounds figure draw bounds rectangle2 d get figure draw bounds builder buf = builder buf append get get substring get get last index +1 buf append buf append hash buf 